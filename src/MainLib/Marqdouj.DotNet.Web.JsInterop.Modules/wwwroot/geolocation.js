var e,o,t;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"})(e||(e={}));class a{#e=e.Information;setLogLevel(o){this.#e=o??e.Information,this.logMessage(e.Information,`LogLevel has been set to: '${r.logLevelName(this.#e)}'`)}logMessage(o,t,...a){if(o<this.#e)return;const c=`[${r.logLevelName(o)}] ${t}`;switch(o){case e.Trace:console.trace(c,...a);break;case e.Debug:console.debug(c,...a);break;case e.Information:console.info(c,...a);break;case e.Warn:console.warn(c,...a);break;case e.Error:console.error(c,...a);break;case e.Critical:console.error(`CRITICAL: ${c}`,...a)}}}class r{static logLevelName(o){switch(o){case e.Critical:return"Critical";case e.Debug:return"Debug";case e.Error:return"Error";case e.Information:return"Information";case e.None:return"None";case e.Trace:return"Trace";case e.Warn:return"Warn"}}}class c{static#o=new Map;static#t=new a;static setLogLevel(e){c.#t.setLogLevel(e)}static async getLocation(o){const t={position:null,error:null},a=new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,c.#a(o)):t({code:0,message:"This device does not support geolocation."})});return await a.then(e=>{t.position=e}).catch(o=>{t.error={code:o.code,message:o.message},c.#t.logMessage(e.Error,"getLocation error:",t)}),t}static async watchPosition(a,r,s,n){if(!navigator.geolocation)return null;if(c.isWatched(r))return;n??=o.NotifyGeolocationWatch;const i=navigator.geolocation.watchPosition(e=>{if(c.isWatched(r)){const o={position:e,error:null},c={key:r,reason:t.WatchSuccess,result:o};a.invokeMethodAsync(n,c)}},o=>{const s={position:null,error:{code:o.code,message:o.message}},i={key:r,reason:t.WatchError,result:s};c.#t.logMessage(e.Error,"watchPosition error:",i),a.invokeMethodAsync(n,i)},c.#a(s));return c.#o.set(r,i),i}static clearWatch(o){if(navigator.geolocation)if(c.#o.has(o)){const e=c.#o.get(o);navigator.geolocation.clearWatch(e),c.#o.delete(o)}else c.#t.logMessage(e.Debug,`clearWatch. key was not found: ${o} `)}static clearWatches(){const o=Array.from(c.#o.keys());c.#t.logMessage(e.Debug,"Clearing watches:",o),o.forEach(e=>{c.clearWatch(e)})}static isWatched(e){return c.#o.has(e)}static#a(e){if(e){const o={};return e.enableHighAccuracy&&(o.enableHighAccuracy=e.enableHighAccuracy),e.maximumAge&&(o.maximumAge=e.maximumAge),e.timeout&&(o.timeout=e.timeout),o}}}!function(e){e.NotifyGeolocationWatch="NotifyGeolocationWatch"}(o||(o={})),function(e){e.WatchSuccess="WatchSuccess",e.WatchError="WatchError"}(t||(t={}));export{c as Geolocation};