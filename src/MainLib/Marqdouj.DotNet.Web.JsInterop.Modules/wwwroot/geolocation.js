var e,o,t;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Information=2]="Information",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"})(e||(e={}));class a{#e=e.Information;setLogLevel(o){this.#e=o??e.Information,this.logMessage(e.Information,`LogLevel has been set to: '${a.#o(this.#e)}'`)}logMessage(o,t,...r){if(o<this.#e)return;const c=`[${a.#o(o)}] ${t}`;switch(o){case e.Trace:console.trace(c,...r);break;case e.Debug:console.debug(c,...r);break;case e.Information:console.info(c,...r);break;case e.Warn:console.warn(c,...r);break;case e.Error:console.error(c,...r);break;case e.Critical:console.error(`CRITICAL: ${c}`,...r)}}static#o(o){switch(o){case e.Critical:return"Critical";case e.Debug:return"Debug";case e.Error:return"Error";case e.Information:return"Information";case e.None:return"None";case e.Trace:return"Trace";case e.Warn:return"Warn"}}}class r{static#t=new Map;static#a=new a;static setLogLevel(e){r.#a.setLogLevel(e)}static async getLocation(o){const t={position:null,error:null},a=new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,r.#r(o)):t({code:0,message:"This device does not support geolocation."})});return await a.then(e=>{t.position=e}).catch(o=>{t.error={code:o.code,message:o.message},r.#a.logMessage(e.Error,"getLocation error:",t)}),t}static async watchPosition(a,c,s,n){if(!navigator.geolocation)return null;if(r.isWatched(c))return;n??=o.NotifyGeolocationWatch;const i=navigator.geolocation.watchPosition(e=>{if(r.isWatched(c)){const o={position:e,error:null},r={key:c,reason:t.WatchSuccess,result:o};a.invokeMethodAsync(n,r)}},o=>{const s={position:null,error:{code:o.code,message:o.message}},i={key:c,reason:t.WatchError,result:s};r.#a.logMessage(e.Error,"watchPosition error:",i),a.invokeMethodAsync(n,i)},r.#r(s));return r.#t.set(c,i),i}static clearWatch(o){if(navigator.geolocation)if(r.#t.has(o)){const e=r.#t.get(o);navigator.geolocation.clearWatch(e),r.#t.delete(o)}else r.#a.logMessage(e.Debug,`clearWatch. key was not found: ${o} `)}static clearWatches(){const o=Array.from(r.#t.keys());r.#a.logMessage(e.Debug,"Clearing watches:",o),o.forEach(e=>{r.clearWatch(e)})}static isWatched(e){return r.#t.has(e)}static#r(e){if(e){const o={};return e.enableHighAccuracy&&(o.enableHighAccuracy=e.enableHighAccuracy),e.maximumAge&&(o.maximumAge=e.maximumAge),e.timeout&&(o.timeout=e.timeout),o}}}!function(e){e.NotifyGeolocationWatch="NotifyGeolocationWatch"}(o||(o={})),function(e){e.WatchSuccess="WatchSuccess",e.WatchError="WatchError"}(t||(t={}));export{r as Geolocation};